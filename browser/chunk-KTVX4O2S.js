import{a as V}from"./chunk-B3CD2NAC.js";import{$ as f,A as h,Ab as F,Bb as T,Cb as M,Db as U,Eb as L,F as b,Fb as R,G as v,Ga as s,_ as m,_a as _,db as k,ia as c,ka as d,nb as N,oa as i,ob as C,pa as o,qa as u,qb as I,sb as y,ub as p,va as w,vb as S,wa as g,wb as P,yb as E,zb as x}from"./chunk-3MHZLJO7.js";function Z(t,n){t&1&&(i(0,"span",16),s(1,"Please enter a valid username with at least 3 characters"),o())}function W(t,n){if(t&1&&(i(0,"span",16),c(1,Z,2,0,"span",9),o()),t&2){let r=g();m(),d("ngIf",(r.userName==null||r.userName.errors==null?null:r.userName.errors.minlength)||(r.userName==null||r.userName.errors==null?null:r.userName.errors.pattern)||(r.userName==null||r.userName.errors==null?null:r.userName.errors.whitespace)||(r.userName==null||r.userName.errors==null?null:r.userName.errors.required))}}function Y(t,n){t&1&&(i(0,"span",16),s(1,"Please enter a valid password with at least 8 characters"),o())}function H(t,n){if(t&1&&(i(0,"span",16),c(1,Y,2,0,"span",9),o()),t&2){let r=g();m(),d("ngIf",(r.password==null||r.password.errors==null?null:r.password.errors.minlength)||(r.password==null||r.password.errors==null?null:r.password.errors.pattern)||(r.password==null||r.password.errors==null?null:r.password.errors.whitespace)||(r.password==null||r.password.errors==null?null:r.password.errors.required))}}var q=(()=>{let n=class n{constructor(l,a,e){this.authService=l,this.router=a,this.fb=e}ngOnInit(){this.createLoginForm()}createLoginForm(){this.loginForm=this.fb.group({userName:[null,[p.required,p.minLength(3),p.pattern("[a-zA-Z ]*"),this.validateTrimPassword.bind(this)]],password:[null,[p.required,p.minLength(8),this.validateTrimPassword.bind(this)]]})}validateAndTrim(l){return(l.value||"").length===0?{whitespace:!0}:null}validateTrimPassword(l){let a=l.value||"",e=a.trim();return e.length===0?{whitespace:!0}:(a!==e&&l.setValue(e,{emitEvent:!1}),null)}get userName(){return this.loginForm.get("userName")}get password(){return this.loginForm.get("password")}onLogin(){if(this.formSubmitted=!0,this.loginForm.valid){let l=this.authService.authUser(this.loginForm.value),a=this.userName?.value.trim();this.loginForm.patchValue({userName:a}),l?(localStorage.setItem("token",l.userName),console.log("Successfully logged in"),alert("Login successful"),this.router.navigate(["/"])):(console.error("Failed to login"),alert("Failed to login. Enter correct credentials")),this.formSubmitted=!1,this.loginForm.reset()}else console.error("Form is invalid")}};n.\u0275fac=function(a){return new(a||n)(f(R),f(N),f(M))},n.\u0275cmp=b({type:n,selectors:[["app-user-login"]],decls:31,vars:4,consts:[[1,"row"],[1,"col-5","m-auto"],[1,"card","m-auto","shadow-lg","border-0"],[1,"card-header","head-heading","text-center"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group","col-12"],[1,"form-label"],["type","text","formControlName","userName",1,"form-control"],["class","error-block text-danger",4,"ngIf"],["required","","type","password","formControlName","password",1,"form-control"],[1,"form-group","col-12","text-center"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["type","button","routerLink","/",1,"btn","btn-secondary","ml-2"],[1,"col-12","text-center","form-label"],["href","/user/register",1,"link-style"],[1,"error-block","text-danger"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4,"Login"),o(),i(5,"div",4)(6,"form",5),w("ngSubmit",function(){return e.onLogin()}),i(7,"div",6)(8,"label",7),s(9," Username "),o(),u(10,"input",8),c(11,W,2,1,"span",9),o(),u(12,"br")(13,"br"),i(14,"div",6)(15,"label",7),s(16,"Password"),o(),u(17,"input",10),c(18,H,2,1,"span",9),o(),u(19,"br")(20,"br"),i(21,"div",11)(22,"button",12),s(23," Login "),o(),i(24,"button",13),s(25,"Cancel"),o()(),u(26,"br"),i(27,"div",14),s(28," Don't have an account? "),i(29,"a",15),s(30,"Sign up"),o()()()()()()()),a&2&&(m(6),d("formGroup",e.loginForm),m(5),d("ngIf",!(e.userName!=null&&e.userName.valid)&&((e.userName==null?null:e.userName.touched)||(e.userName==null?null:e.userName.dirty)||e.formSubmitted)),m(7),d("ngIf",!(e.password!=null&&e.password.valid)&&((e.password==null?null:e.password.touched)||(e.password==null?null:e.password.dirty)||e.formSubmitted)),m(4),d("disabled",e.loginForm.invalid))},dependencies:[_,C,E,y,S,P,T,x,F],styles:[".card[_ngcontent-%COMP%]{border-radius:10px}.card-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;padding-top:10px;padding-bottom:10px}.head-heading[_ngcontent-%COMP%]{background:#007bff;color:#fff}.form-label[_ngcontent-%COMP%]{font-weight:700;color:#000}.form-control[_ngcontent-%COMP%]{border-radius:5px;transition:all .3s}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff80}.btn-primary[_ngcontent-%COMP%]{border-color:#000;background-color:#00f;transition:all .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00008b;border-color:#00008b}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d;transition:all .3s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.error-block[_ngcontent-%COMP%]{font-size:.9rem;margin-top:.25rem}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 1rem 3rem #0000002d!important}.link-style[_ngcontent-%COMP%]{color:#00f}.link-style[_ngcontent-%COMP%]:hover{color:#00008b}"]});let t=n;return t})();function J(t,n){t&1&&(i(0,"span",22),s(1,"Please enter a valid username with at least 3 characters"),o())}function K(t,n){if(t&1&&(i(0,"span",22),c(1,J,2,0,"span",10),o()),t&2){let r=g();m(),d("ngIf",(r.userName==null||r.userName.errors==null?null:r.userName.errors.minlength)||(r.userName==null||r.userName.errors==null?null:r.userName.errors.pattern)||(r.userName==null||r.userName.errors==null?null:r.userName.errors.whitespace)||(r.userName==null||r.userName.errors==null?null:r.userName.errors.required))}}function Q(t,n){t&1&&(i(0,"span"),s(1," Please provide an email "),o())}function X(t,n){t&1&&(i(0,"span"),s(1," Please provide a valid email "),o())}function $(t,n){if(t&1&&(i(0,"span",22),c(1,Q,2,0,"span",23)(2,X,2,0,"span",23),o()),t&2){let r=g();m(),d("ngIf",r.email==null?null:r.email.hasError("required")),m(),d("ngIf",r.email==null?null:r.email.hasError("email"))}}function ee(t,n){t&1&&(i(0,"span"),s(1," Please provide a valid password with at least 8 characters "),o())}function re(t,n){if(t&1&&(i(0,"span",22),c(1,ee,2,0,"span",23),o()),t&2){let r=g();m(),d("ngIf",(r.password==null?null:r.password.hasError("required"))||(r.password==null?null:r.password.hasError("minlength"))||(r.password==null||r.password.errors==null?null:r.password.errors.whitespace))}}function te(t,n){t&1&&(i(0,"span"),s(1,"Please confirm password"),o())}function ne(t,n){if(t&1&&(i(0,"span",22),c(1,te,2,0,"span",23),o()),t&2){let r=g();m(),d("ngIf",r.confirmPassword==null?null:r.confirmPassword.hasError("required"))}}function oe(t,n){t&1&&(i(0,"span",22),s(1," Passwords do not match "),o())}var D=(()=>{let n=class n{constructor(l,a,e){this.fb=l,this.userService=a,this.router=e}ngOnInit(){this.createRegistrationForm(),this.userService.getNewUserId().subscribe(l=>{this.registrationForm.patchValue({id:l})})}createRegistrationForm(){this.registrationForm=this.fb.group({id:[null],userName:[null,[p.required,p.minLength(3),p.pattern("[a-zA-Z ]*"),this.validateAndTrim.bind(this)]],email:[null,[p.required,p.email]],password:[null,[p.required,p.minLength(8),this.validateAndTrim.bind(this)]],confirmPassword:[null,p.required]},{validators:this.passwordMatchingValidator})}validateAndTrim(l){let a=l.value||"",e=a.trim();return e.length===0?{whitespace:!0}:(a!==e&&l.setValue(e,{emitEvent:!1}),null)}passwordMatchingValidator(l){let a=l.get("password")?.value,e=l.get("confirmPassword")?.value;return a===e?null:{passwordMismatch:!0}}userData(){return this.user={id:this.registrationForm.get("id")?.value,userName:this.userName?.value,email:this.email?.value,password:this.password?.value}}get userName(){return this.registrationForm.get("userName")}get email(){return this.registrationForm.get("email")}get password(){return this.registrationForm.get("password")}get confirmPassword(){return this.registrationForm.get("confirmPassword")}onSubmit(){if(this.formSubmitted=!0,this.registrationForm.valid){let l=this.userName?.value.trim();this.registrationForm.patchValue({userName:l}),this.userService.addUsers(this.userData()),this.registrationForm.reset(),this.formSubmitted=!1,this.router.navigate(["/user/login"])}else console.error("error message"),alert("Inorrect credentials")}};n.\u0275fac=function(a){return new(a||n)(f(M),f(V),f(N))},n.\u0275cmp=b({type:n,selectors:[["app-user-register"]],decls:49,vars:7,consts:[[1,"row"],[1,"col-5","m-auto"],[1,"card","m-auto","shadow-lg","border-0"],[1,"card-header","head-heading","text-center"],[1,"text-center"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group","col-12"],["for","name",1,"form-label"],["type","text","formControlName","userName",1,"form-control"],["class","error-block text-danger",4,"ngIf"],["for","email",1,"form-label"],["type","text","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","formControlName","confirmPassword",1,"form-control"],[1,"form-group","col-12","text-center"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["type","reset","routerLink","/",1,"btn","btn-secondary","ml-2"],[1,"col-12","text-center","form-label"],["href","/user/login",1,"link-style"],[1,"error-block","text-danger"],[4,"ngIf"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4,"Register"),o(),i(5,"div",4)(6,"h6"),s(7,"Register Yourself!!!!"),o()(),i(8,"div",5)(9,"form",6),w("ngSubmit",function(){return e.onSubmit()}),i(10,"div",7)(11,"label",8),s(12,"Username"),o(),u(13,"input",9),c(14,K,2,1,"span",10),o(),u(15,"br")(16,"br"),i(17,"div",7)(18,"label",11),s(19,"Email"),o(),u(20,"input",12),c(21,$,3,2,"span",10),o(),u(22,"br")(23,"br"),i(24,"div",7)(25,"label",13),s(26,"Password"),o(),u(27,"input",14),c(28,re,2,1,"span",10),o(),u(29,"br")(30,"br"),i(31,"div",7)(32,"label",15),s(33,"Confirm Password"),o(),u(34,"input",16),c(35,ne,2,1,"span",10)(36,oe,2,0,"span",10),o(),u(37,"br")(38,"br"),i(39,"div",17)(40,"button",18),s(41,"Save"),o(),i(42,"button",19),s(43,"Cancel"),o()(),u(44,"br"),i(45,"div",20),s(46," Already have an account/Want social login? "),i(47,"a",21),s(48,"Log In"),o()()()()()()()),a&2&&(m(9),d("formGroup",e.registrationForm),m(5),d("ngIf",!(e.userName!=null&&e.userName.valid)&&((e.userName==null?null:e.userName.touched)||(e.userName==null?null:e.userName.dirty)||e.formSubmitted)),m(7),d("ngIf",!(e.email!=null&&e.email.valid)&&((e.email==null?null:e.email.touched)||e.formSubmitted)),m(7),d("ngIf",!(e.password!=null&&e.password.valid)&&((e.password==null?null:e.password.touched)||(e.password==null?null:e.password.dirty)||e.formSubmitted)),m(7),d("ngIf",!(e.confirmPassword!=null&&e.confirmPassword.valid)&&((e.confirmPassword==null?null:e.confirmPassword.touched)||e.formSubmitted)),m(),d("ngIf",e.registrationForm.hasError("passwordMismatch")&&(e.confirmPassword==null?null:e.confirmPassword.valid)),m(4),d("disabled",e.registrationForm.invalid))},dependencies:[_,C,E,y,S,P,x,F],styles:[".card[_ngcontent-%COMP%]{border-radius:10px}.card-header[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;padding-top:10px;padding-bottom:10px}.head-heading[_ngcontent-%COMP%]{background:#007bff;color:#fff}.form-label[_ngcontent-%COMP%]{font-weight:700;color:#000}.form-control[_ngcontent-%COMP%]{border-radius:5px;transition:all .3s}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff80}.btn-primary[_ngcontent-%COMP%]{border-color:#000;background-color:#00f;transition:all .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00008b;border-color:#00008b}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d;transition:all .3s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.error-block[_ngcontent-%COMP%]{font-size:.9rem;margin-top:.25rem}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 1rem 3rem #0000002d!important}.link-style[_ngcontent-%COMP%]{color:#00f}.link-style[_ngcontent-%COMP%]:hover{color:#00008b}"]});let t=n;return t})();var ie=[{path:"login",component:q},{path:"register",component:D}],j=(()=>{let n=class n{};n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=v({type:n}),n.\u0275inj=h({imports:[I.forChild(ie),I]});let t=n;return t})();var ye=(()=>{let n=class n{constructor(){console.log("usermodule loaded")}};n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=v({type:n}),n.\u0275inj=h({imports:[k,j,U,L]});let t=n;return t})();export{ye as UserModule};
